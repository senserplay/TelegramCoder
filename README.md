# ü§ñ Telegram Code Collaborator Bot

> **Telegram-–±–æ—Ç –¥–ª—è –∫–æ–ª–ª–µ–∫—Ç–∏–≤–Ω–æ–π –ø–æ—Å—Ç—Ä–æ—á–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞ —á–µ—Ä–µ–∑ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è**  
> –ü–æ–∑–≤–æ–ª—è–µ—Ç –≥—Ä—É–ø–ø–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–≤–º–µ—Å—Ç–Ω–æ –ø–∏—Å–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É ‚Äî —Å—Ç—Ä–æ–∫–∞ –∑–∞ —Å—Ç—Ä–æ–∫–æ–π, –≤—ã–±–∏—Ä–∞—è –ª—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç —Å –ø–æ–º–æ—â—å—é LLM –∏ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –≤ —á–∞—Ç–µ.

---

## üéØ –û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è

–ë–æ—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç **4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞** —Å –ø–æ–º–æ—â—å—é LLM (–Ω–∞ –æ—Å–Ω–æ–≤–µ —É–∂–µ –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–≥–æ), –ø—É–±–ª–∏–∫—É–µ—Ç –∏—Ö –≤ –≤–∏–¥–µ **Telegram-–æ–ø—Ä–æ—Å–∞**, —Å–æ–±–∏—Ä–∞–µ—Ç –≥–æ–ª–æ—Å–∞ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –ø–æ–±–µ–¥–∏–≤—à—É—é —Å—Ç—Ä–æ–∫—É. –ß–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏—Ç–µ—Ä–∞—Ü–∏–π –ø–æ–ª—É—á–∞–µ—Ç—Å—è **–ø–æ–ª–Ω—ã–π –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π Python-—Ñ–∞–π–ª**, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π —Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º üß†+ü§ñ.

---

## üöÄ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
| –ö–æ–º–∞–Ω–¥–∞ | –ö—Ç–æ | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|-----|----------|
| `/start` | –ê–¥–º–∏–Ω | –û—á–∏—â–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç **–ø–µ—Ä–≤—ã–π –æ–ø—Ä–æ—Å** (—Å—Ç–∞—Ä—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞) |
| `/code` | –í—Å–µ | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –∫–æ–¥ —á–∞—Ç–∞ –≤ –≤–∏–¥–µ Markdown-–∫–æ–¥–±–ª–æ–∫–∞ |
| `/code_completed` | –ê–¥–º–∏–Ω | –ó–∞–≤–µ—Ä—à–∞–µ—Ç –∫–æ–¥: LLM ¬´–¥–æ–¥–µ–ª—ã–≤–∞–µ—Ç¬ª –µ–≥–æ –¥–æ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ–º–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è **–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏**, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `.py`-—Ñ–∞–π–ª |
| `/sendnow` | –ê–¥–º–∏–Ω | –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –æ–ø—Ä–æ—Å **–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ** (–∏–≥–Ω–æ—Ä–∏—Ä—É—è —Ç–∞–π–º–µ—Ä) |
| `/health` | –ê–¥–º–∏–Ω | –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã: uptime, –∞–∫—Ç–∏–≤–Ω—ã–µ –æ–ø—Ä–æ—Å—ã, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤–æ—Ä–∫–µ—Ä–∞ |
| `/logs`, `/alllogs` | –ê–¥–º–∏–Ω | –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 100 —Å—Ç—Ä–æ–∫ –∏–ª–∏ –≤—Å–µ–≥–æ –ª–æ–≥-—Ñ–∞–π–ª–∞ |

### ‚úÖ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- ‚úÖ **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –∏—Å—Ç–æ—Ä–∏—è –æ–ø—Ä–æ—Å–æ–≤ –∏ —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ PostgreSQL + Redis
- ‚úÖ **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Ä–µ—Å—Ç–∞—Ä—Ç–æ–≤**: –∞–∫—Ç–∏–≤–Ω—ã–µ –æ–ø—Ä–æ—Å—ã –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è
- ‚úÖ **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã**: –∫–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ ‚â§ 95 —Å–∏–º–≤–æ–ª–æ–≤
- ‚úÖ **LLM-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ + —Ñ–∏–Ω–∞–ª—å–Ω–∞—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥-–¥–æ—Ä–∞–±–æ—Ç–∫–∞
- ‚úÖ **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: —Ä–æ—Ç–∞—Ü–∏—è, —Ñ–∞–π–ª + –∫–æ–Ω—Å–æ–ª—å, –∞–¥–º–∏–Ω-–¥–æ—Å—Ç—É–ø

---

## üìÅ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
src/
‚îú‚îÄ‚îÄ core/              # DI, –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ infrastructure/    # –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (PostgreSQL, Redis)
‚îú‚îÄ‚îÄ services/          # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (PollService, CodeLineService)
‚îú‚îÄ‚îÄ handlers/          # Telegram-—Ö–µ–Ω–¥–ª–µ—Ä—ã (admin.py, code.py, poll.py, ...)
‚îú‚îÄ‚îÄ external/          # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (LLM ProxyAPI)
‚îú‚îÄ‚îÄ utils/             # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏
‚îú‚îÄ‚îÄ worker/            # PollWorker (—Ñ–æ–Ω–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å—Ç–µ–∫—à–∏—Ö –æ–ø—Ä–æ—Å–æ–≤)
‚îî‚îÄ‚îÄ main.py            # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
```

- **–°–ª–æ–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: `handlers ‚Üí services ‚Üí gateways (DB/Redis)`
- **Dependency Injection**: [Dishka](https://github.com/dishka-team/dishka)
- **ORM**: SQLAlchemy (async), Alembic (–º–∏–≥—Ä–∞—Ü–∏–∏)
- **–•—Ä–∞–Ω–∏–ª–∏—â–µ**: PostgreSQL (–ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å) + Redis (–∞–∫—Ç–∏–≤–Ω—ã–µ –æ–ø—Ä–æ—Å—ã, TTL)
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å**: `asyncio`, `aiogram`

---

## üõ†Ô∏è –ó–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker & Docker Compose (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ ‚Äî –¥–∞–∂–µ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞)
- Python 3.10+ (–¥–ª—è —Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–∞)

---

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/senserplay/TelegramCoder.git
cd TelegramCoder

# –°–æ–∑–¥–∞–π—Ç–µ .env –∏–∑ —à–∞–±–ª–æ–Ω–∞
cp .env.example .env
```

### 2. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å—ë:
docker-compose up --build -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:
docker-compose logs -f bot
```

> üí° –í `docker-compose.yml` –ø–æ–¥–Ω–∏–º–∞—é—Ç—Å—è:
> - `postgres` (–±–∞–∑–∞)
> - `redis` (–∫—ç—à/–∞–∫—Ç–∏–≤–Ω—ã–µ –æ–ø—Ä–æ—Å—ã)
> - `bot` (—Å–∞–º–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)

---

### 3. –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ Docker –¥–ª—è –±–æ—Ç–∞, –Ω–æ **—Å Docker –¥–ª—è –ë–î/Redis**)

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ Docker
docker-compose up -d postgres redis

# –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ venv –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt

# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
alembic upgrade head

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
python src/main.py
```

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è


## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

1. –ê–¥–º–∏–Ω –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `/start` ‚Üí –±–æ—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 1-—é —Å—Ç—Ä–æ–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, `def factorial(n):`)
2. –£—á–∞—Å—Ç–Ω–∏–∫–∏ –≥–æ–ª–æ—Å—É—é—Ç ‚Üí –≤—Ä–µ–º—è, –∑–∞–¥–∞–Ω–Ω–æ–µ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–∏–ª–∏ –ø–æ `/sendnow`) ‚Äî –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –ø–æ–±–µ–¥–∏—Ç–µ–ª—å
3. –ë–æ—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 2-—é —Å—Ç—Ä–æ–∫—É –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–µ—Ä–≤–æ–π ‚Üí –Ω–æ–≤—ã–π –æ–ø—Ä–æ—Å
4. –ü–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
5. –ê–¥–º–∏–Ω –≤—ã–∑—ã–≤–∞–µ—Ç `/code_completed` ‚Üí –ø–æ–ª—É—á–∞–µ—Ç `main.py`

---

## üì¶ –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ |
|----------|------------|
| **Backend** | Python 3.11, FastAPI-style async |
| **Telegram** | aiogram 3.x |
| **–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** | PostgreSQL (SQLAlchemy), Redis (aioredis) |
| **DI / –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** | Dishka, Repository Pattern, DTO, TDD-–ø–æ–¥—Ö–æ–¥ |
| **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è** | Docker, Docker Compose, Alembic |
| **LLM** | OpenAI API (–ø—Ä–æ–∫—Å–∏ —á–µ—Ä–µ–∑ `external/llm/proxy_api.py`) |
| **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** | RotatingFileHandler, HTML-—ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è Telegram |
